version: '3.9'

services:
  minio:
    image: quay.io/minio/minio:RELEASE.2021-12-20T22-07-16Z
    command: server /data --console-address ":9001"
    hostname: "minio"
    ports:
      # - "9000:9000"
      - "9001:9001"
    environment:
      MINIO_ROOT_USER: minio
      MINIO_ROOT_PASSWORD: minio123
    volumes:
      - "${PWD}/minio/data:/data"

  nginx:
    image: "nginx:latest"
    restart: always
    hostname: "nginx"
    depends_on:
      - minio
    ports:
      - '80:80'
    volumes:
      - "${PWD}/nginx/conf.d:/etc/nginx/conf.d"
      - "${PWD}/nginx/logs:/var/log/nginx"
      - "${PWD}/nginx/html:/usr/share/nginx/html"
      - "${PWD}/nginx/config/nginx.conf:/etc/nginx/nginx.conf"

  # frps:
  #   image: "snowdreamtech/frps"
  #   restart: always
  #   hostname: "frps"
  #   network_mode: host
  #   # volumes:
  #   #   - "${FRP_HOME:-frps}/frps.ini:/etc/frp/frps.ini"
  
  # frpc:
  #   image: "snowdreamtech/frpc"
  #   restart: always
  #   hostname: "frpc"
  #   depends_on:
  #     - frps
  #   network_mode: host
  #   # volumes:
  #   #   - "${FRP_HOME:-frpc}/frpc.ini:/etc/frp/frpc.ini"


  # gitlab:
  #   image: 'gitlab/gitlab-ee:latest'
  #   restart: always
  #   hostname: 'gitlab.slient.com'
  #   environment:
  #     GITLAB_OMNIBUS_CONFIG: |
  #       external_url 'https://gitlab.slient.com'
  #       # Add any other gitlab.rb configuration here, each on its own line
  #   ports:
  #     - '8080:80'
  #     - '443:443'
  #     - '23:22'
  #   volumes:
  #     - '$GITLAB_HOME/config:/etc/gitlab'
  #     - '$GITLAB_HOME/logs:/var/log/gitlab'
  #     - '$GITLAB_HOME/data:/var/opt/gitlab'
  #   networks:
  #     - gitlab

  # gitlab-runner:
  #   image: 'gitlab/gitlab-runner:latest'
  #   restart: always
  #   depends_on:
  #     - gitlab
  #   privileged: true
  #   volumes:
  #     - '$GITLAB_RUNNER_HOME/config/gitlab-runner:/etc/gitlab-runner'
  #     - '/var/run/docker.sock:/var/run/docker.sock'
  #     - '$GITLAB_RUNNER_HOME//bin/docker:/bin/docker'
  #   networks:
  #     - gitlab